<!doctype html>
<html>
    <head>
        <title>client login</title>
        <script src = "//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <script src = "dropbox_datastore.js"></script>
        <script>
            $(document).on('ready', function() {
                var APP_KEY = "dl019n2on8xqd66",
                    client = new Dropbox.Client({ key: APP_KEY });

                client.authenticate({ interactive: false }, function (error) {
                    console.log('ok');
                    if (error) {
                        console.log('authentication error: ' + error);
                    }
                });

                if (client.isAuthenticated()) {
                    console.log('success');
                }

                var datastoreManager = client.getDatastoreManager();
                datastoreManager.openDefaultDatastore(function (error, datastore) {
                    if (error) {
                        console.log('default datastore error: ' + error);
                    }

                    var taskTable = datastore.getTable('tasks');
                    var firstTask = taskTable.insert() {
                        taskname: 'Learn Rails',
                        completed: true,
                        created: new Date()
                    });
                });
            });
        </script>
    </head>
    <body>
        <button id = "authenticate">Authenticate</button>
    </body>
</html>
